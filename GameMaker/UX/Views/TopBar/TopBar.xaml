<Page x:Class="GameMaker.UX.Views.TopBar.TopBar"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
      xmlns:topBar="using:GameMaker.UX.ViewModels.TopBar"
      xmlns:behaviors="using:GameLibrary.Behaviors"
      mc:Ignorable="d"
      d:DataContext="{d:DesignInstance topBar:TopBarViewModel}"
      behaviors:LoadedBehavior.LoadedCommand="{x:Bind ViewModel.LoadedCommand}">
  <ItemsControl ItemsSource="{x:Bind ViewModel.EngineImages, Mode=OneWay}">
    <ItemsControl.ItemsPanel>
      <ItemsPanelTemplate>
        <StackPanel Orientation="Horizontal" Spacing="10" />
      </ItemsPanelTemplate>
    </ItemsControl.ItemsPanel>
    <ItemsControl.ItemTemplate>
      <DataTemplate xmlns:models="using:GameLibrary.Models" x:DataType="models:EngineImage">
        <Grid>
          <!-- Template with Rect (clipped Canvas) -->
          <Canvas Width="{x:Bind Rect, Converter={StaticResource RectWidthConverter}}"
                  Height="{x:Bind Rect, Converter={StaticResource RectHeightConverter}}"
                  Visibility="{x:Bind Rect, Converter={StaticResource NullToCollapsedConverter}}">
            <Canvas.Clip>
              <RectangleGeometry Rect="{x:Bind Rect, Converter={StaticResource RectValueConverter}}" />
            </Canvas.Clip>
            <Image Source="{x:Bind ImageSource}" />
          </Canvas>

          <!-- Template without Rect (plain Image) -->
          <Image Source="{x:Bind ImageSource}"
                 Visibility="{x:Bind Rect, Converter={StaticResource NullToVisibleConverter}}" />
        </Grid>
      </DataTemplate>
    </ItemsControl.ItemTemplate>
  </ItemsControl>

  <!-- Original hardcoded example (now commented out): -->
  <!-- <Canvas Width="48" Height="48">
    <Canvas.Clip>
      <RectangleGeometry Rect="0,0,48,48" />
    </Canvas.Clip>
    <Image Source="ms-appx:///Graphics/Icons.png" />
  </Canvas> -->

  <!-- <Border ClipToBounds="True"> -->
  <!--   <Border.Clip> -->
  <!--     <RectangleGeometry Rect="0, 0, 48, 48" /> -->
  <!--   </Border.Clip> -->
  <!--   <Image Source="ms-appx:///Graphics/Icons.png" /> -->
  <!-- </Border> -->
  <!-- <Grid> -->
  <!--   ~1~ <Button Width="200" Height="200"> @1@ -->
  <!--   ~1~   <Image Source="{x:Bind ViewModel.TestUri, Mode=OneWay}" /> @1@ -->
  <!--   ~1~ </Button> @1@ -->
  <!-- -->
  <!--   <Button Width="200" Height="200"> -->
  <!--     <Image Source="{x:Bind ViewModel.TestImage, Mode=OneWay}" -->
  <!--            Width="48" -->
  <!--            Height="48" /> -->
  <!--   </Button> -->
  <!--   <Canvas></Canvas> -->
  <!--   ~1~ <Image Source="{x:Bind ViewModel.TestUri, Mode=OneWay}" /> @1@ -->
  <!--   ~1~ </Button> @1@ -->
  <!-- </Grid> -->
  <!-- <StackPanel Orientation="Horizontal" Spacing="20"> -->
  <!--   <StackPanel Orientation="Horizontal" Spacing="10"> -->
  <!--     <iconButtons:ToggleIconButton Image="{x:Bind ViewModel.MainImage, Mode=OneWay}" -->
  <!--                                   CornerRadius="10 0 10 0" -->
  <!--                                   SolidBorderBrush="{StaticResource MediumGreyBrush}" -->
  <!--                                   SolidBorderThickness="1" -->
  <!--                                   Command="{x:Bind ViewModel.TopBarCommand}" -->
  <!--                                   CommandParameter="0" -->
  <!--                                   GroupName="Entities" -->
  <!--                                   IsChecked="True" -->
  <!--                                   ToolTipContent="Main" -->
  <!--                                   ToolTipInitialDelay="500" /> -->
  <!--     <iconButtons:ToggleIconButton Image="{x:Bind ViewModel.ActorsImage, Mode=OneWay}" -->
  <!--                                   CornerRadius="10 0 10 0" -->
  <!--                                   SolidBorderBrush="{StaticResource MediumGreyBrush}" -->
  <!--                                   SolidBorderThickness="1" -->
  <!--                                   Command="{x:Bind ViewModel.TopBarCommand}" -->
  <!--                                   CommandParameter="1" -->
  <!--                                   GroupName="Entities" -->
  <!--                                   ToolTipContent="Actors" -->
  <!--                                   ToolTipInitialDelay="500" /> -->
  <!--     <iconButtons:ToggleIconButton Image="{x:Bind ViewModel.DisciplinesImage, Mode=OneWay}" -->
  <!--                                   CornerRadius="10 0 10 0" -->
  <!--                                   SolidBorderBrush="{StaticResource MediumGreyBrush}" -->
  <!--                                   SolidBorderThickness="1" -->
  <!--                                   Command="{x:Bind ViewModel.TopBarCommand}" -->
  <!--                                   CommandParameter="2" -->
  <!--                                   GroupName="Entities" -->
  <!--                                   ToolTipContent="Disciplines" -->
  <!--                                   ToolTipInitialDelay="500" /> -->
  <!--     <iconButtons:ToggleIconButton Image="{x:Bind ViewModel.ArtesImage, Mode=OneWay}" -->
  <!--                                   CornerRadius="10 0 10 0" -->
  <!--                                   SolidBorderBrush="{StaticResource MediumGreyBrush}" -->
  <!--                                   SolidBorderThickness="1" -->
  <!--                                   Command="{x:Bind ViewModel.TopBarCommand}" -->
  <!--                                   CommandParameter="3" -->
  <!--                                   GroupName="Entities" -->
  <!--                                   ToolTipContent="Artes" -->
  <!--                                   ToolTipInitialDelay="500" /> -->
  <!--     <iconButtons:ToggleIconButton Image="{x:Bind ViewModel.ItemsImage, Mode=OneWay}" -->
  <!--                                   CornerRadius="10 0 10 0" -->
  <!--                                   SolidBorderBrush="{StaticResource MediumGreyBrush}" -->
  <!--                                   SolidBorderThickness="1" -->
  <!--                                   Command="{x:Bind ViewModel.TopBarCommand}" -->
  <!--                                   CommandParameter="4" -->
  <!--                                   GroupName="Entities" -->
  <!--                                   ToolTipContent="Items" -->
  <!--                                   ToolTipInitialDelay="500" /> -->
  <!--     <iconButtons:ToggleIconButton Image="{x:Bind ViewModel.EquipmentImage, Mode=OneWay}" -->
  <!--                                   CornerRadius="10 0 10 0" -->
  <!--                                   SolidBorderBrush="{StaticResource MediumGreyBrush}" -->
  <!--                                   SolidBorderThickness="1" -->
  <!--                                   Command="{x:Bind ViewModel.TopBarCommand}" -->
  <!--                                   CommandParameter="5" -->
  <!--                                   GroupName="Entities" -->
  <!--                                   ToolTipContent="Equipment" -->
  <!--                                   ToolTipInitialDelay="500" /> -->
  <!--     <iconButtons:ToggleIconButton Image="{x:Bind ViewModel.EnemiesImage, Mode=OneWay}" -->
  <!--                                   CornerRadius="10 0 10 0" -->
  <!--                                   SolidBorderBrush="{StaticResource MediumGreyBrush}" -->
  <!--                                   SolidBorderThickness="1" -->
  <!--                                   Command="{x:Bind ViewModel.TopBarCommand}" -->
  <!--                                   CommandParameter="6" -->
  <!--                                   GroupName="Entities" -->
  <!--                                   ToolTipContent="Enemies" -->
  <!--                                   ToolTipInitialDelay="500" /> -->
  <!--     <iconButtons:ToggleIconButton Image="{x:Bind ViewModel.TroopsImage, Mode=OneWay}" -->
  <!--                                   CornerRadius="10 0 10 0" -->
  <!--                                   SolidBorderBrush="{StaticResource MediumGreyBrush}" -->
  <!--                                   SolidBorderThickness="1" -->
  <!--                                   Command="{x:Bind ViewModel.TopBarCommand}" -->
  <!--                                   CommandParameter="7" -->
  <!--                                   GroupName="Entities" -->
  <!--                                   ToolTipContent="Troops" -->
  <!--                                   ToolTipInitialDelay="500" /> -->
  <!--     <iconButtons:ToggleIconButton Image="{x:Bind ViewModel.StatesImage, Mode=OneWay}" -->
  <!--                                   CornerRadius="10 0 10 0" -->
  <!--                                   SolidBorderBrush="{StaticResource MediumGreyBrush}" -->
  <!--                                   SolidBorderThickness="1" -->
  <!--                                   Command="{x:Bind ViewModel.TopBarCommand}" -->
  <!--                                   CommandParameter="8" -->
  <!--                                   GroupName="Entities" -->
  <!--                                   ToolTipContent="States" -->
  <!--                                   ToolTipInitialDelay="500" /> -->
  <!--     <iconButtons:ToggleIconButton Image="{x:Bind ViewModel.AnimationsImage, Mode=OneWay}" -->
  <!--                                   CornerRadius="10 0 10 0" -->
  <!--                                   SolidBorderBrush="{StaticResource MediumGreyBrush}" -->
  <!--                                   SolidBorderThickness="1" -->
  <!--                                   Command="{x:Bind ViewModel.TopBarCommand}" -->
  <!--                                   CommandParameter="9" -->
  <!--                                   GroupName="Entities" -->
  <!--                                   ToolTipContent="Animations" -->
  <!--                                   ToolTipInitialDelay="500" /> -->
  <!--     <iconButtons:ToggleIconButton Image="{x:Bind ViewModel.SettingsImage, Mode=OneWay}" -->
  <!--                                   CornerRadius="10 0 10 0" -->
  <!--                                   SolidBorderBrush="{StaticResource MediumGreyBrush}" -->
  <!--                                   SolidBorderThickness="1" -->
  <!--                                   Command="{x:Bind ViewModel.TopBarCommand}" -->
  <!--                                   CommandParameter="10" -->
  <!--                                   GroupName="Entities" -->
  <!--                                   ToolTipContent="Settings" -->
  <!--                                   ToolTipInitialDelay="500" /> -->
  <!--   </StackPanel> -->
  <!-- </StackPanel> -->
</Page>
